(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)r=o[d],i[r]&&p.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},i={app:0},s=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("64a9"),i=n.n(a);i.a},"04d4":function(e,t,n){"use strict";var a=n("9023"),i=n.n(a);i.a},"0b97":function(e,t,n){"use strict";(function(e){n("cadf"),n("551c"),n("097d");var t={"Add Event":"Nuovo evento",Where:"Dove",When:"Quando",What:"Cosa",Media:"Locandina",where_explanation:"Specifica il luogo dell'evento",address_explanation:"Inserisci l'indirizzo",multidate_explanation:"Dura tanti giorni?",when_explanation:"Seleziona un giorno",what_explanation:"Titolo dell'evento (es. Corteo Antimilitarista),",description_explanation:"Descrivi l'evento, dajene di copia/incolla",date_explanation:"Seleziona il giorno",dates_explanation:"Seleziona i giorni",time_start_explanation:"Inserisci un orario di inizio",time_end_explanation:"Puoi inserire un orario di fine",media_explanation:"Se vuoi puoi mettere una locandina/manifesto",tag_explanation:"Puoi inserire un tag (es. concerto, corteo)",export_intro:"Contrariamente alle piattaforme del capitalismo, che fanno di tutto per tenere\n  i dati e gli utenti al loro interno, crediamo che le informazioni, come le persone,\n  debbano essere libere.",export_feed_explanation:'Per seguire gli aggiornamenti da computer o smartphone senza la necessità di aprire periodicamente il sito, il metodo consigliato è quello dei Feed RSS.</p>\n\n  <p>Con i feed rss utilizzi un\'apposita applicazione per ricevere aggiornamenti dai siti che più ti interessano.  È un buon metodo per seguire anche molti siti in modo molto rapido, senza necessità di creare un account o altre complicazioni.</p>\n\n  <p>Se hai Android, ti consigliamo <a href="https://play.google.com/store/apps/details?id=net.frju.flym">Flym</a> o Feeder<br />\n  Per iPhone/iPad puoi usare <a href="https://itunes.apple.com/ua/app/feeds4u/id1038456442?mt=8">Feed4U</a><br />\n  Per il computer fisso/portatile consigliamo  Feedbro, da installare all\'interno <a href="https://addons.mozilla.org/en-GB/firefox/addon/feedbroreader/">di Firefox </a>o <a href="https://chrome.google.com/webstore/detail/feedbro/mefgmmbdailogpfhfblcnnjfmnpnmdfa">di Chrome</a> e compatibile con tutti i principali sistemi operativi.</p>\n\n  Aggiungendo il link sopra, rimarrai aggiornata sui seguenti eventi:',Poster:"Locandina",Settings:"Impostazioni",Search:"Cerca",Send:"Invia",Register:"Registrati",Logout:"Esci",Login:"Entra",SignIn:"Registrati",Cancel:"Annulla",Next:"Continua",Prev:"Indietro",Username:"Utente",Description:"Descrizione",Deactivate:"Disattiva",Activate:"Attiva","Remove Admin":"Rimuovi Admin",Users:"Utenti",Places:"Luoghi",Tags:"Etichette",Admin:"Amministra",Today:"Oggi","Edit event":"Modifica evento","New event":"Nuovo evento",registration_email:"Ciao, la tua registrazione sarà confermata nei prossimi giorni. Riceverai una conferma non temere.",register_explanation:"I movimenti hanno bisogno di organizzarsi e autofinanziarsi. <br/>Questo è un dono per voi, non possiamo più vedervi usare le piattaforme del capitalismo. Solo eventi non commerciali e ovviamente antifascisti, antisessisti, antirazzisti. \n    <br/>Prima di poter pubblicare <strong>dobbiamo approvare l'account</strong>, considera che <strong>dietro questo sito ci sono delle persone</strong> di\n    carne e sangue, scrivici quindi due righe per farci capire che eventi vorresti pubblicare."};e.exports=t}).call(this,n("dd40")(e))},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=s(e);return n(t)}function s(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(a)},i.resolve=s,e.exports=i,i.id="4678"},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("cebc"),i=(n("cadf"),n("551c"),n("097d"),n("2b0e")),s=n("a925"),r=n("9f7b"),o=n("da28"),c=n.n(o),l=(n("d06d"),n("0874")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"relative"}},[n("b-input-group",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],ref:"input",staticClass:"form-control",attrs:{type:"search",placeholder:e.placeholder,autocomplete:"off"},domProps:{value:e.search},on:{input:[function(t){t.target.composing||(e.search=t.target.value)},e.update],keydown:[function(t){return"button"in t||!e._k(t.keyCode,"backspace",void 0,t.key,void 0)?e.backspace(t):null},function(t){return"button"in t||!e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?(t.preventDefault(),e.up(t)):null},function(t){return"button"in t||!e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?(t.preventDefault(),e.down(t)):null},function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.hit(t):null},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.reset(!0)}],blur:function(t){e.focus=!1},focus:function(t){e.focus=!0}}})]),n("div",e._l(e.selectedLabel,function(t){return n("b-badge",{key:t,staticClass:"mr-1",on:{click:function(n){e.removeSelected(t)}}},[e._v(e._s(t))])}),1),n("b-list-group",{directives:[{name:"show",rawName:"v-show",value:e.showDropdown,expression:"showDropdown"}],staticClass:"groupMenu"},e._l(e.matched,function(t,a){return n("b-list-group-item",{key:a,class:{active:e.isActive(a)},attrs:{href:"#"},on:{mousedown:function(t){return t.preventDefault(),e.hit(t)},mousemove:function(t){e.setActive(a)}}},[e._t(e.templateName,[e._v(e._s(e.textField?t[e.textField]:t))])],2)}),1)],1)},d=[],p=(n("386d"),n("6762"),n("2fdb"),n("c5f6"),n("b6d0")),m=n.n(p),f={props:{value:{twoWay:!0,type:[String,Array,m.a],default:""},data:{type:Array},template:{type:String},templateName:{type:String,default:"default"},valueField:{type:String,default:null},textField:{type:String,default:null},showClear:{type:Boolean,default:!0},matchCase:{type:Boolean,default:!1},matchStart:{type:Boolean,default:!1},onHit:{type:Function,default:function(){this.reset()}},placeholder:{type:String},updateOnMatchOnly:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},maxMatch:{type:Number,default:4}},data:function(){return{focus:!1,noResults:!0,current:0,search:"",selected:[]}},watch:{value:function(e){console.log("dentro watch ",e),e?this.multiple?this.selected=e:this.search=e:(this.search="",this.multiple&&this.$emit("input",[]))}},computed:{showDropdown:function(){return console.log("dentro showDropdown ",this.focus,this.matched),this.focus},selectedValues:function(){var e=this;return this.selected.map(function(t){return e.valueField&&t[e.valueField]||t})},selectedLabel:function(){var e=this;return this.selected.map(function(t){return e.textField&&t[e.textField]||t})},matched:function(){var e=this;if(this.data)return this.data.filter(function(t){if(e.textField&&(t=t[e.textField]),e.multiple&&e.selectedLabel.includes(t))return!1;t=e.matchCase?t:t.toLowerCase();var n=e.matchCase?e.search:e.search.toLowerCase();return e.matchStart?0===t.indexOf(n):-1!==t.indexOf(n)}).slice(0,this.maxMatch)}},methods:{update:function(e){return this.multiple&&","===e.data?(this.search=this.search.substr(0,this.search.length-1),void this.hit(e)):(this.updateOnMatchOnly||this.multiple||this.$emit("input",this.search),this.focus=!0,this.matched.length?void(this.matched.length<=this.current&&(this.current=this.matched.length-1)):(this.focus=!1,void(this.current=0)))},backspace:function(){this.search||(console.log("backspace"),this.selected.splice(-1,1),this.$emit("input",this.selected.length?this.selectedValues:""))},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("dentro reset ",close),this.search="",this.current=0,this.$refs.input.focus(),e?this.focus=!1:(this.selected=[],this.$emit("input",""))},setActive:function(e){this.current=e},isActive:function(e){return this.current===e},removeSelected:function(e){var t=this;this.selected=this.selected.filter(function(n){return(t.textField&&n[t.textField]||n)!==e}),this.$emit("input",this.selected.length?this.selectedValues:[])},hit:function(e){console.log(this),console.log("dentro matched ",this.current),e.preventDefault();var t="",n="";0!==this.matched.length&&this.focus?(n=this.matched[this.current],t=this.textField?n[this.textField]:n,console.log("sono qui dentro ",n,t)):(t=this.search,console.log("non matched ma solo scritto e invio!")),this.multiple?t&&(this.selected.push(t),this.search="",console.log("dentro hit",this.selectedValues),console.log(this.selected),this.$emit("input",this.selected),this.focus=!1):(console.log("sono qui dentro no multiple",t),this.$emit("input",t),this.current=0,this.focus=!1,this.search=t),this.$emit("enter")},up:function(){this.current>0&&this.current--},down:function(){this.current<this.matched.length-1&&this.current++}}},h=f,v=(n("d478"),n("2877")),b=Object(v["a"])(h,u,d,!1,null,"526ddfcd",null);b.options.__file="Typeahead.vue";var g=b.exports,_=n("4eb5"),x=n.n(_),j=(n("4418"),n("f9e3"),n("2dd8"),n("5c96")),k=n.n(j),w=(n("0fae"),n("956c")),y=n.n(w),$=n("b2d6"),C=n.n($),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-navbar",{attrs:{type:"dark",variant:"dark",toggleable:"lg"}},[n("b-navbar-brand",{attrs:{to:"/"}},[e._v("Gancio ")]),n("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),n("b-collapse",{attrs:{id:"nav_collapse","is-nav":""}},[e.logged?n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{attrs:{to:"/new_event"}},[n("v-icon",{attrs:{color:"lightgreen",name:"plus"}}),e._v(" "+e._s(e.$t("Add Event")))],1),n("b-nav-item",{on:{click:function(t){e.search=!e.search}}},[n("v-icon",{attrs:{color:"lightgreen",name:"search"}}),e._v(" "+e._s(e.$t("Search")))],1),n("b-nav-item",{attrs:{to:"/settings"}},[n("v-icon",{attrs:{color:"orange",name:"cog"}}),e._v(" "+e._s(e.$t("Settings")))],1),e.user.is_admin?n("b-nav-item",{attrs:{to:"/admin"}},[n("v-icon",{attrs:{color:"lightblue",name:"tools"}}),e._v(" "+e._s(e.$t("Admin")))],1):e._e(),n("b-nav-item",{attrs:{variant:"danger"},on:{click:e.logout}},[n("v-icon",{attrs:{color:"red",name:"sign-out-alt"}}),e._v(" "+e._s(e.$t("Logout")))],1)],1):n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{attrs:{to:"/register"}},[e._v(e._s(e.$t("Register")))]),n("b-nav-item",{attrs:{to:"/login"}},[e._v(e._s(e.$t("Login")))])],1)],1)],1),n("transition",{attrs:{name:"toggle"}},[e.search?n("b-navbar",{attrs:{id:"search",type:"dark",variant:"dark",toggleable:"lg"}},[n("b-navbar-nav",[n("b-nav-form",[n("typeahead",{staticClass:"ml-1",attrs:{textField:"name",valueField:"name",updateOnMatchOnly:"",data:e.places,multiple:"",placeholder:"Luogo"},model:{value:e.filters_places,callback:function(t){e.filters_places=t},expression:"filters_places"}})],1),n("b-nav-form",[n("typeahead",{staticClass:"ml-1",attrs:{updateOnMatchOnly:"",textField:"tag",valueField:"tag",data:e.tags,multiple:"",placeholder:"Tags"},model:{value:e.filters_tags,callback:function(t){e.filters_tags=t},expression:"filters_tags"}})],1)],1),n("b-navbar-nav",{staticClass:"ml-auto",attrs:{variant:"dark"}},[n("b-nav-item",{attrs:{to:"/export/feed",href:"#"}},[n("v-icon",{attrs:{color:"orange",name:"rss"}}),e._v(" feed")],1),n("b-nav-item",{attrs:{to:"/export/ics"}},[n("v-icon",{attrs:{color:"orange",name:"calendar"}}),e._v(" cal")],1),n("b-nav-item",{attrs:{to:"/export/email"}},[n("v-icon",{attrs:{color:"orange",name:"envelope"}}),e._v(" mail")],1),n("b-nav-item",{attrs:{to:"/export/embed"}},[n("v-icon",{attrs:{color:"orange",name:"code"}}),e._v(" embed")],1),n("b-nav-item",{attrs:{to:"/export/print"}},[n("v-icon",{attrs:{color:"orange",name:"print"}}),e._v(" print")],1)],1)],1):e._e()],1),n("Home"),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{attrs:{name:"modal"}})],1)],1)},E=[],S=n("c1df"),z=n.n(S),R=n("bc3a"),P=n.n(R),T=(n("96cf"),n("3b8d")),A=(n("7f7f"),n("7514"),n("2f62")),F=n("bfa9");i["default"].use(A["a"]);var D=new F["a"]({storage:window.localStorage,reducer:function(e){return{logged:e.logged,user:e.user,token:e.token}}}),M=new A["a"].Store({plugins:[D.plugin],getters:{token:function(e){return e.token}},state:{logged:!1,user:{},token:"",events:[],tags:[],places:[],filters:{tags:[],places:[],hidePast:!1}},mutations:{logout:function(e){e.logged=!1,e.token="",e.user={}},login:function(e,t){e.logged=!0,e.user=t.user,e.token=t.token},setEvents:function(e,t){e.events=t},addEvent:function(e,t){e.events.push(t)},updateEvent:function(e,t){e.events=e.events.map(function(e){return e.id!==t.id?e:t})},delEvent:function(e,t){e.events=e.events.filter(function(e){return e.id!==t})},update:function(e,t){var n=t.tags,a=t.places;e.tags=n,e.places=a},addSearchTag:function(e,t){e.filters.tags.find(function(e){return e===t.tag})||e.filters.tags.push(t.tag)},setSearchTags:function(e,t){e.filters.tags=t},addSearchPlace:function(e,t){e.filters.places.find(function(e){return e.name===t.name})&&e.filters.places.push(t)},setSearchPlaces:function(e,t){e.filters.places=t}},actions:{updateEvents:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(t,n){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,W.getAllEvents(n.month-1,n.year);case 3:i=e.sent,a("setEvents",i);case 5:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),updateMeta:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(t){var n,a,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,console.log("dentro update"),e.next=4,W.getMeta();case 4:a=e.sent,i=a.tags,s=a.places,console.log(i,s),n("update",{tags:i,places:s});case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addEvent:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(t,n){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,W.addEvent(n);case 3:i=e.sent,a("addEvent",i);case 5:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),updateEvent:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(t,n){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,W.updateEvent(n);case 3:i=e.sent,a("updateEvent",i);case 5:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),delEvent:function(e,t){var n=e.commit;n("delEvent",t)},login:function(e,t){var n=e.commit;n("login",t)},logout:function(e){var t=e.commit;t("logout")},addSearchTag:function(e,t){var n=e.commit;n("addSearchTag",t)},setSearchTags:function(e,t){var n=e.commit;n("setSearchTags",t)},addSearchPlace:function(e,t){var n=e.commit;n("addSearchPlace",t)},setSearchPlaces:function(e,t){var n=e.commit;n("setSearchPlaces",t)}}}),L=n("a1bc"),U=P.a.create({baseURL:L["default"].apiurl,withCredentials:!1,responseType:"json",headers:{Accept:"application/json","Content-Type":"application/json"}});function I(e){return U.get(e,{headers:{"x-access-token":M.state.token}}).then(function(e){return e.data})}function H(e,t){return U.post(e,t,{headers:{"x-access-token":M.state.token}}).then(function(e){return e.data})}function N(e,t){return U.put(e,t,{headers:{"x-access-token":M.state.token}}).then(function(e){return e.data})}function q(e){return console.log(M.state.token),U.delete(e,{headers:{"x-access-token":M.state.token}}).then(function(e){return e.data})}var W={login:function(e,t){return H("/login",{email:e,password:t})},register:function(e){return H("/user",e)},getAllEvents:function(e,t){return I("/event/".concat(t,"/").concat(e,"/"))},addEvent:function(e){return H("/user/event",e)},updateEvent:function(e){return N("/user/event",e)},delEvent:function(e){return q("/user/event/".concat(e))},getEvent:function(e){return I("/event/".concat(e))},getMeta:function(){return I("/event/meta")},getUser:function(){return I("/user")},getUsers:function(){return I("/users")},updateTag:function(e){return N("/tag",e)},updateUser:function(e){return N("/user",e)},getAuthURL:function(e){return H("/user/getauthurl",e)},setCode:function(e){return H("/user/code",e)},getKnowLocations:function(){return I("/locations")},getKnowTags:function(){return I("/tags")}},B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{"hide-header":"","hide-footer":"",visible:!0},on:{hide:function(t){e.$router.go(-1)},shown:function(t){e.$refs.email.focus()}}},[n("h4",{staticClass:"text-center center"},[e._v(e._s(e.$t("Register")))]),n("b-form",[n("p",{staticClass:"text-muted",domProps:{innerHTML:e._s(e.$t("register_explanation"))}}),n("b-input-group",{staticClass:"mb-1"},[n("b-input-group-prepend",[n("b-input-group-text",[e._v("@")])],1),n("b-form-input",{ref:"email",staticClass:"form-control",attrs:{type:"text",placeholder:"Email",autocomplete:"email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),n("b-input-group",{staticClass:"mb-1"},[n("b-input-group-prepend",[n("b-input-group-text",[n("v-icon",{attrs:{name:"lock"}})],1)],1),n("b-form-input",{staticClass:"form-control",attrs:{type:"password",placeholder:"Password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),n("b-input-group",{staticClass:"mb-1"},[n("b-input-group-prepend",[n("b-input-group-text",[n("v-icon",{attrs:{name:"envelope-open-text"}})],1)],1),n("b-form-textarea",{staticClass:"form-control",attrs:{type:"text",rows:"3",placeholder:e.$t("Description")},model:{value:e.user.description,callback:function(t){e.$set(e.user,"description",t)},expression:"user.description"}})],1),n("b-button",{staticClass:"float-right",attrs:{variant:"success"},on:{click:e.register}},[e._v(e._s(e.$t("Send")))])],1)],1)},G=[],V={name:"Register",data:function(){return{error:{},user:{}}},methods:Object(a["a"])({},Object(A["b"])(["login"]),{register:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.register(this.user);case 3:e.sent,this.$router.go(-1),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()})},J=V,K=Object(v["a"])(J,B,G,!1,null,null,null);K.options.__file="Register.vue";var Q=K.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{"hide-header":"","hide-footer":"",visible:!0},on:{shown:function(t){e.$refs.email.focus()},hide:function(t){e.$router.go(-1)}}},[n("h4",{staticClass:"text-center center"},[e._v(e._s(e.$t("Login")))]),n("b-form",[n("b-input-group",{staticClass:"mb-1"},[n("b-input-group-prepend",[n("b-input-group-text",[n("v-icon",{attrs:{name:"user"}})],1)],1),n("b-form-input",{ref:"email",staticClass:"form-control",attrs:{type:"text",placeholder:"E-mail",autocomplete:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),n("b-input-group",{staticClass:"mb-3"},[n("b-input-group-prepend",[n("b-input-group-text",[n("v-icon",{attrs:{name:"lock"}})],1)],1),n("b-form-input",{staticClass:"form-control",attrs:{type:"password",placeholder:"Password",autocomplete:"current-password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("b-button",{staticClass:"float-right",attrs:{variant:"success"},on:{click:e.submit}},[e._v("Login")])],1)],1)},X=[],Z=(n("3022"),{name:"Login",data:function(){return{password:"",email:""}},methods:Object(a["a"])({},Object(A["b"])(["login"]),{submit:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,W.login(this.email,this.password);case 3:if(n=e.sent,n){e.next=7;break}return console.log("login errato!"),e.abrupt("return");case 7:this.login(n),this.email=this.password="",this.$router.go(-1);case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()})}),ee=Z,te=Object(v["a"])(ee,Y,X,!1,null,null,null);te.options.__file="Login.vue";var ne=te.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{"hide-header":"","hide-footer":"",visible:!0},on:{hide:function(t){e.$router.push("/")}}},[n("h4",{staticClass:"text-center"},[e._v(e._s(e.$t("Settings"))),n("b-form",[n("b-input-group",{staticClass:"mt-1",attrs:{prepend:"Email"}},[n("b-form-input",{model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),n("b-input-group",{staticClass:"mt-1",attrs:{prepend:"Mastodon instance"}},[n("b-form-input",{model:{value:e.mastodon_instance,callback:function(t){e.mastodon_instance=t},expression:"mastodon_instance"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"primary"},on:{click:e.associate}},[e._v("Associate")])],1)],1)],1)],1)])},ie=[],se={props:["code"],data:function(){return{mastodon_instance:"",user:{}}},computed:Object(A["c"])(["oauth"]),mounted:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.query.code,!t){e.next=5;break}return e.next=4,W.setCode({code:t});case 4:e.sent;case 5:return e.next=7,W.getUser();case 7:n=e.sent,this.user=n,this.mastodon_instance=n.instance;case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{associate:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.getAuthURL({instance:this.mastodon_instance});case 2:t=e.sent,setTimeout(function(){return window.location.href=t},100);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},re=se,oe=Object(v["a"])(re,ae,ie,!1,null,null,null);oe.options.__file="Settings.vue";var ce=oe.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{"hide-header":"","hide-footer":"","no-close-on-backdrop":"","no-close-on-esc":"",size:"lg",visible:!0},on:{hide:function(t){e.$router.go(-1)}}},[n("h4",{staticClass:"text-center center"},[e._v(e._s(e.edit?e.$t("Edit event"):e.$t("New event")))]),n("b-tabs",{attrs:{id:"tabss",pills:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("b-form"),n("b-tab",[n("template",{slot:"title"},[n("v-icon",{attrs:{name:"map-marker-alt"}}),n("span",[e._v(" "+e._s(e.$t("Where")))])],1),n("b-card-body",[n("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("where_explanation")))]),n("typeahead",{staticClass:"mb-3",attrs:{data:e.places_name},on:{enter:e.placeChoosed},model:{value:e.event.place.name,callback:function(t){e.$set(e.event.place,"name",t)},expression:"event.place.name"}}),n("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("address_explanation")))]),n("b-form-input",{ref:"address",nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.next(t):null}},model:{value:e.event.place.address,callback:function(t){e.$set(e.event.place,"address",t)},expression:"event.place.address"}})],1)],2),n("b-tab",[n("template",{slot:"title"},[n("v-icon",{attrs:{name:"clock"}}),n("span",[e._v(" "+e._s(e.$t("When")))])],1),n("b-card-body",[n("el-switch",{staticClass:"float-right",attrs:{"active-text":e.$t("multidate_explanation")},model:{value:e.event.multidate,callback:function(t){e.$set(e.event,"multidate",t)},expression:"event.multidate"}}),n("span",{staticClass:"text-muted"},[e._v(e._s(e.event.multidate?e.$t("dates_explanation"):e.$t("date_explanation")))]),n("v-date-picker",{staticClass:"mb-3",attrs:{mode:e.event.multidate?"range":"single","is-inline":"","is-expanded":"","min-date":new Date},on:{input:function(t){e.date&&e.$refs.time_start.focus()}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),n("b-row",[n("b-col",[n("label",{staticClass:"text-muted"},[e._v(e._s(e.$t("time_start_explanation")))]),n("el-time-select",{ref:"time_start",attrs:{"picker-options":{start:"00:00",step:"00:30",end:"24:00"}},model:{value:e.time.start,callback:function(t){e.$set(e.time,"start",t)},expression:"time.start"}})],1),n("b-col",{staticClass:"text-right"},[n("label",{staticClass:"text-muted"},[e._v(e._s(e.$t("time_end_explanation")))]),n("el-time-select",{attrs:{"picker-options":{start:""+(e.event.multidate?"00:00":e.time.start),step:"00:30",end:"24:00"}},model:{value:e.time.end,callback:function(t){e.$set(e.time,"end",t)},expression:"time.end"}})],1)],1)],1)],2),n("b-tab",[n("template",{slot:"title"},[n("v-icon",{attrs:{name:"file-alt"}}),n("span",[e._v(" "+e._s(e.$t("What")))])],1),n("b-card-body",[n("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("what_explanation")))]),n("b-form-input",{staticClass:"mb-3",attrs:{autocomplete:"off"},model:{value:e.event.title,callback:function(t){e.$set(e.event,"title","string"===typeof t?t.trim():t)},expression:"event.title"}}),n("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("description_explanation")))]),n("b-form-textarea",{staticClass:"mb-3",attrs:{placeholder:"Description",rows:3},model:{value:e.event.description,callback:function(t){e.$set(e.event,"description",t)},expression:"event.description"}}),n("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("tag_explanation")))]),n("typeahead",{attrs:{data:e.tags,multiple:""},model:{value:e.event.tags,callback:function(t){e.$set(e.event,"tags",t)},expression:"event.tags"}})],1)],2),n("b-tab",[n("template",{slot:"title"},[n("v-icon",{attrs:{name:"image"}}),n("span",[e._v(" "+e._s(e.$t("Media")))])],1),n("b-card-body",[n("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("media_explanation")))]),n("b-form-file",{attrs:{placeholder:e.$t("Poster"),accept:"image/*"},model:{value:e.event.image,callback:function(t){e.$set(e.event,"image",t)},expression:"event.image"}})],1)],2),0==e.activeTab?n("b-button",{attrs:{variant:"danger"},on:{click:function(t){e.$router.go(-1)}}},[e._v(e._s(e.$t("Cancel")))]):n("b-button",{staticClass:"float-left",attrs:{variant:"danger"},on:{click:e.prev}},[e._v(e._s(e.$t("Prev")))]),e.activeTab<3?n("b-button",{staticClass:"float-right",attrs:{variant:"success",disabled:!e.couldProceed},on:{click:e.next}},[e._v(e._s(e.$t("Next")))]):n("b-button",{staticClass:"float-right",attrs:{variant:"success"},on:{click:e.done}},[e._v(e._s(e.edit?e.$t("Edit"):e.$t("Send")))])],1)],1)},ue=[],de=(n("ac6a"),n("28a5"),n("768b")),pe={data:function(){return{event:{place:{name:"",address:""},title:"",description:"",tags:[],multidate:!1},id:null,activeTab:0,date:null,time:{start:"00:00",end:null},edit:!1}},name:"newEvent",mounted:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$route.params.id){e.next=18;break}return this.id=this.$route.params.id,this.edit=!0,e.next=5,W.getEvent(this.id);case 5:t=e.sent,console.log("PLACE NAME",t.place.name),this.event.place.name=t.place.name,console.log(t),this.event.place.address=t.place.address||"",this.event.multidate=t.multidate,this.date=t.start_datetime,this.time.start=z()(t.start_datetime).format("HH:mm"),this.time.end=z()(t.end_datetime).format("HH:mm"),this.event.title=t.title,this.event.description=t.description,this.event.id=t.id,t.tags&&(console.log("tags qui dentro",t.tags),this.event.tags=t.tags.map(function(e){return e.tag}));case 18:this.updateMeta();case 19:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),computed:Object(a["a"])({},Object(A["c"])({tags:function(e){return e.tags.map(function(e){return e.tag})},places_name:function(e){return e.places.map(function(e){return e.name})},places:function(e){return e.places}}),{couldProceed:function(){switch(this.activeTab){case 0:return this.event.place.name.length>0&&this.event.place.address.length>0;case 1:return!0;case 2:return this.event.title.length>0;case 3:return!0}}}),methods:Object(a["a"])({},Object(A["b"])(["addEvent","updateEvent","updateMeta"]),{next:function(){this.activeTab++},prev:function(){this.activeTab--},placeChoosed:function(){var e=this,t=this.places.find(function(t){return t.name===e.event.place.name});t&&t.address&&(this.event.place.address=t.address),this.$refs.address.focus()},done:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t,n,a,i,s,r,o,c,l,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("TIME ",this.time),a=this.time.start.split(":"),i=Object(de["a"])(a,2),s=i[0],r=i[1],this.time.end||(this.time.end=this.time.start),o=this.time.end.split(":"),c=Object(de["a"])(o,2),l=c[0],u=c[1],console.log(this.time),this.event.multidate?(t=z()(this.date.start).hour(s).minute(r),n=z()(this.date.end).hour(l).minute(u)):(t=z()(this.date).hour(s).minute(r),n=z()(this.date).hour(l).minute(u)),d=new FormData,this.event.image&&d.append("image",this.event.image,this.event.image.name),d.append("title",this.event.title),d.append("place_name",this.event.place.name),d.append("place_address",this.event.place.address),d.append("description",this.event.description),d.append("multidate",this.event.multidate),d.append("start_datetime",t),d.append("end_datetime",n),this.edit&&d.append("id",this.event.id),this.event.tags&&this.event.tags.forEach(function(e){return d.append("tags[]",e)}),e.prev=17,!this.edit){e.next=23;break}return e.next=21,this.updateEvent(d);case 21:e.next=25;break;case 23:return e.next=25,this.addEvent(d);case 25:this.updateMeta(),this.$router.go(-1),e.next=32;break;case 29:e.prev=29,e.t0=e["catch"](17),console.error(e.t0);case 32:case"end":return e.stop()}},e,this,[[17,29]])}));function t(){return e.apply(this,arguments)}return t}()})},me=pe,fe=(n("6ded"),Object(v["a"])(me,le,ue,!1,null,null,null));fe.options.__file="newEvent.vue";var he=fe.exports,ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"eventDetail","hide-footer":"","hide-header":"",size:"lg",visible:!0},on:{hide:function(t){e.$router.go(-1)}}},[n("b-card",{attrs:{"bg-variant":"dark",href:"#","text-variant":"white","no-body":"","img-src":e.imgPath}},[n("b-card-header",[n("h3",[e._v(e._s(e.event.title))]),n("v-icon",{attrs:{name:"clock"}}),n("span",[e._v(" "+e._s(e._f("datetime")(e.event.start_datetime)))]),n("br"),n("v-icon",{attrs:{name:"map-marker-alt"}}),n("span",[e._v(" "+e._s(e.event.place.name)+" - "+e._s(e.event.place.address))]),n("br")],1),e.event.description||e.event.tags?n("b-card-footer",[e._v(e._s(e.event.description)),n("br"),e._l(e.event.tags,function(t){return n("b-badge",{style:{backgroundColor:t.color}},[e._v(e._s(t.tag))])})],2):e._e(),e.mine?n("b-navbar",{attrs:{type:"dark",variant:"dark",toggleable:"lg"}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{on:{click:function(t){return t.preventDefault(),e.remove(t)}}},[n("v-icon",{attrs:{color:"red",name:"times"}}),e._v(" "+e._s(e.$t("Remove"))+" ")],1),n("b-nav-item",{attrs:{to:"/edit/"+e.event.id}},[n("v-icon",{attrs:{color:"orange",name:"edit"}}),e._v(" "+e._s(e.$t("Edit")))],1)],1)],1):e._e()],1)],1)},be=[];z.a.locale("it");var ge={datetime:function(e){return z()(e).format("ddd, D MMMM HH:mm")},hour:function(e){return z()(e).format("HH:mm")}},_e={computed:Object(a["a"])({},Object(A["c"])(["user"]),{imgPath:function(){return this.event.image_path&&config.apiurl+this.event.image_path},mine:function(){return this.event.userId===this.user.id||this.user.is_admin}}),data:function(){return{event:{comments:[],place:{}},id:null}},mounted:function(){this.id=this.$route.params.id,this.load()},filters:ge,methods:Object(a["a"])({},Object(A["b"])(["delEvent"]),{load:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.getEvent(this.id);case 2:t=e.sent,this.event=t;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),remove:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.delEvent(this.event.id);case 2:this.delEvent(this.event.id),this.$router.go(-1);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()})},xe=_e,je=(n("5be1"),Object(v["a"])(xe,ve,be,!1,null,null,null));je.options.__file="EventDetail.vue";var ke=je.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{staticClass:"column pl-1",attrs:{"bg-variant":"dark","text-variant":"white","no-body":""}},[n("b-card-header",[n("strong",[e._v("Public events")]),e.logged?n("b-btn",{staticClass:"float-right",attrs:{variant:"success",size:"sm",to:"/newEvent"}},[n("v-icon",{attrs:{name:"plus"}}),e._v(" Add Event")],1):e._e()],1),e._l(e.events,function(e){return n("event",{key:e.id,attrs:{event:e}})})],2)},ye=[],$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{"bg-variant":"dark","text-variant":"white","img-src":e.imgPath},on:{click:function(t){e.$router.push("/event/"+e.event.id)}}},[n("h4",[e._v(e._s(e.event.title))]),n("div",[n("v-icon",{attrs:{name:"clock"}}),e._v(" "+e._s(e._f("datetime")(e.event.start_datetime)))],1),n("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:e.event.place&&e.event.place.address||"",expression:"event.place && event.place.address || ''",modifiers:{hover:!0}}]},[n("v-icon",{attrs:{name:"map-marker-alt"}}),e._v(" "+e._s(e.event.place.name))],1),n("br"),e._l(e.event.tags,function(t){return n("b-badge",{style:{backgroundColor:t.color},attrs:{href:"#"},on:{click:function(n){n.stopPropagation(),e.addSearchTag(t)}}},[e._v(e._s(t.tag))])})],2)},Ce=[],Oe={props:["event"],computed:Object(a["a"])({},Object(A["c"])(["user"]),{imgPath:function(){return this.event.image_path&&L["default"].apiurl+this.event.image_path},mine:function(){return this.event.userId===this.user.id}}),filters:ge,methods:Object(a["a"])({},Object(A["b"])(["delEvent","addSearchTag"]),{remove:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.delEvent(this.event.id);case 2:this.delEvent(this.event.id);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()})},Ee=Oe,Se=(n("d7a8"),Object(v["a"])(Ee,$e,Ce,!1,null,"f79fd7b2",null));Se.options.__file="Event.vue";var ze=Se.exports,Re={components:{event:ze},computed:Object(A["c"])(["events","logged"])},Pe=Re,Te=Object(v["a"])(Pe,we,ye,!1,null,null,null);Te.options.__file="Timeline.vue";Te.exports;var Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-card-group",{attrs:{columns:""}},[n("Calendar"),e._l(e.filteredEvents,function(e){return n("Event",{key:e.id,staticClass:"item",attrs:{event:e}})})],2)],1)},Fe=[],De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-calendar",{staticClass:"card",attrs:{id:"calendar",attributes:e.attributes,"from-page":e.page,"is-expanded":"","is-inline":""},on:{"update:fromPage":function(t){e.page=t}},scopedSlots:e._u([{key:"popover",fn:function(t){var a=t.customData;return n("div",{},[n("router-link",{attrs:{to:"/event/"+a.id}},[e._v(e._s(e._f("hour")(a.start_datetime))+" - "+e._s(a.title)+" @"+e._s(a.place.name))])],1)}}])})},Me=[],Le=n("75fc"),Ue={name:"Calendar",filters:ge,data:function(){var e=z()().month()+1,t=z()().year();return{page:{month:e,year:t}}},mounted:function(){this.updateEvents(this.page)},watch:{page:function(){this.updateEvents(this.page)}},methods:Object(a["a"])({},Object(A["b"])(["updateEvents"]),{eventToAttribute:function(e){var t={key:e.id,customData:e,order:e.start_datetime,popover:{slot:"popover",visibility:"hover"}},n=e.tags.length&&e.tags[0].color?e.tags[0].color:"rgba(200,200,200,0.5)";return console.log(n),e.multidate?(t.dates={start:e.start_datetime,end:e.end_datetime},t.highlight={backgroundColor:n,borderColor:"transparent",borderWidth:"4px"}):(t.dates=e.start_datetime,t.dot={backgroundColor:n,borderColor:n,borderWidth:"3px"}),t}}),computed:Object(a["a"])({},Object(A["c"])(["events","tags"]),{attributes:function(){return[{key:"todaly",dates:new Date,highlight:{backgroundColor:"#aaffaa"},popover:{label:this.$t("Today")}}].concat(Object(Le["a"])(this.events.map(this.eventToAttribute)))}})},Ie=Ue,He=(n("04d4"),Object(v["a"])(Ie,De,Me,!1,null,null,null));He.options.__file="Calendar.vue";var Ne=He.exports,qe=n("2ef0"),We={name:"Home",components:{Event:ze,Calendar:Ne},computed:Object(a["a"])({},Object(A["c"])(["events","filters"]),{filteredEvents:function(){var e=this;return console.log("filtered events",this.filters.places),this.filters.tags.length||this.filters.places.length?this.events.filter(function(t){if(e.filters.tags.length){var n=Object(qe["intersection"])(t.tags.map(function(e){return e.tag}),e.filters.tags);if(n.length>0)return!0}return!(!e.filters.places.length||(console.log("antani ciao",e.filters.places),!e.filters.places.find(function(e){return e===t.place.name})))||0}):this.events}})},Be=We,Ge=(n("8b71"),Object(v["a"])(Be,Ae,Fe,!1,null,null,null));Ge.options.__file="Home.vue";var Ve=Ge.exports,Je={name:"App",mounted:function(){this.updateMeta()},data:function(){return{search:!1}},components:{Register:Q,Login:ne,Home:Ve,Settings:ce,newEvent:he,eventDetail:ke},computed:Object(a["a"])({},Object(A["c"])(["logged","user","filters","tags","places"]),{filters_tags:{set:function(e){console.log("dentro set ",e),this.setSearchTags(e)},get:function(){return console.log("dentro get"),console.log(this.filters),this.filters.tags}},filters_places:{set:function(e){this.setSearchPlaces(e)},get:function(){return this.filters.places}}}),methods:Object(A["b"])(["logout","updateMeta","addSearchTag","setSearchTags","setSearchPlaces","addSearchPlace"])},Ke=Je,Qe=(n("034f"),Object(v["a"])(Ke,O,E,!1,null,null,null));Qe.options.__file="App.vue";var Ye=Qe.exports,Xe=n("8c4f"),Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.type?n("b-modal",{attrs:{"hide-footer":"","hide-header":"",size:"lg",visible:!0},on:{hide:function(t){e.$router.go(-1)}}},[n("h3",{staticClass:"text-center"},[e._v("Export "+e._s(e.type))]),e.showLink?n("b-input-group",{staticClass:"mb-2"},[n("b-form-input",{attrs:{autocomplete:"off"},model:{value:e.link,callback:function(t){e.link=t},expression:"link"}}),n("b-input-group-append",[n("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.link,expression:"link",arg:"copy"}],attrs:{variant:"success"}},[n("v-icon",{attrs:{name:"clipboard"}}),e._v(" Copy ")],1)],1)],1):e._e(),n("p",[e._v(e._s(e.$t("export_intro")))]),n("p",{domProps:{innerHTML:e._s(e.$t("export_"+e.type+"_explanation"))}}),e.filters.tags.length?n("li",[e._v(e._s(e.$t("Tags"))+" ->"),e._l(e.filters.tags,function(t){return n("b-badge",{staticClass:"ml-1"},[e._v(e._s(t))])})],2):e._e(),e.filters.places.length?n("li",[e._v(e._s(e.$t("Places"))),e._l(e.filters.places,function(t){return n("b-badge",{staticClass:"ml-1"},[e._v(e._s(t))])})],2):e._e(),"email"===e.type?n("b-form",[n("el-switch",{attrs:{"active-text":e.$t("notify_on_insert")},model:{value:e.mail.sendOnInsert,callback:function(t){e.$set(e.mail,"sendOnInsert",t)},expression:"mail.sendOnInsert"}}),n("br"),n("el-switch",{attrs:{"active-text":e.$t("send_reminder")},model:{value:e.mail.reminder,callback:function(t){e.$set(e.mail,"reminder",t)},expression:"mail.reminder"}}),n("b-form-input",{staticClass:"mt-1",attrs:{placeholder:e.$t("Insert your address")},model:{value:e.mail.mail,callback:function(t){e.$set(e.mail,"mail",t)},expression:"mail.mail"}}),n("b-button",{staticClass:"mt-1 float-right",attrs:{variant:"success"},on:{click:e.activate_email}},[e._v(e._s(e.$t("Send")))])],1):e._e()],1):e._e()},et=[];n("df7c");console.log(L["default"]);var tt={name:"Export",data:function(){return{type:"",link:"",mail:{}}},mounted:function(){this.type=this.$route.params.type,this.link=this.loadLink(),"email"===this.type&&this.logged&&(this.mail.mail=this.user.email)},methods:{activate_email:function(){console.log("TODO"),this.$router.go(-1)},loadLink:function(){var e=this.filters.tags.join(",");return"".concat(L["default"].apiurl,"/export/").concat(this.type,"/").concat(e)}},computed:Object(a["a"])({},Object(A["c"])(["filters","user","logged"]),{showLink:function(){return["feed","ics"].indexOf(this.type)>-1}})},nt=tt,at=Object(v["a"])(nt,Ze,et,!1,null,null,null);at.options.__file="Export.vue";var it=at.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{"hide-footer":"","hide-header":"",size:"lg",visible:!0},on:{hide:function(t){e.$router.go(-1)}}},[n("h4",{staticClass:"text-center"},[e._v("Admin")]),n("b-tabs",{attrs:{pills:""}},[n("b-tab",[n("template",{slot:"title"},[n("v-icon",{attrs:{name:"users"}}),n("span",[e._v(" "+e._s(e.$t("Users")))])],1),n("b-table",{attrs:{items:e.users,fields:e.userFields,striped:"",hover:""},scopedSlots:e._u([{key:"action",fn:function(t){return[n("b-button",{staticClass:"mr-1",attrs:{variant:t.item.is_active?"warning":"success"},on:{click:function(n){e.toggle(t.item)}}},[e._v(e._s(t.item.is_active?e.$t("Deactivate"):e.$t("Activate")))]),n("b-button",{attrs:{variant:t.item.is_admin?"danger":"warning"},on:{click:function(n){e.toggleAdmin(t.item)}}},[e._v(e._s(t.item.is_admin?e.$t("Remove Admin"):e.$t("Admin")))])]}}])})],2),n("b-tab",[n("template",{slot:"title"},[n("v-icon",{attrs:{name:"map-marker-alt"}}),n("span",[e._v(" "+e._s(e.$t("Places")))])],1),n("b-table",{attrs:{items:e.places,fields:e.placeFields,striped:"",hover:""}})],2),n("b-tab",[n("template",{slot:"title"},[n("v-icon",{attrs:{name:"tag"}}),n("span",[e._v(" "+e._s(e.$t("Tags")))])],1),n("b-table",{attrs:{items:e.tags,fields:e.tagFields,striped:"",hover:""},scopedSlots:e._u([{key:"tag",fn:function(t){return[n("b-badge",{style:{backgroundColor:t.item.color}},[e._v(e._s(t.item.tag))])]}},{key:"color",fn:function(t){return[n("el-color-picker",{on:{change:function(n){e.updateColor(t.item)}},model:{value:t.item.color,callback:function(n){e.$set(t.item,"color",n)},expression:"data.item.color"}})]}}])})],2),n("b-tab",[n("template",{slot:"title"},[n("v-icon",{attrs:{name:"tools"}}),n("span",[e._v(" "+e._s(e.$t("Settings")))])],1)],2)],1)],1)},rt=[],ot={name:"Admin",data:function(){return{users:[],userFields:["email","action"],placeFields:["name","address"],tagFields:["tag","color"],description:""}},mounted:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.getUsers();case 2:this.users=e.sent,console.log("dentro mounted !",this.users);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),computed:Object(A["c"])(["tags","places"]),methods:{toggle:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.is_active=!t.is_active,e.next=3,W.updateUser(t);case 3:e.sent;case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),toggleAdmin:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.is_admin=!t.is_admin,e.next=3,W.updateUser(t);case 3:e.sent;case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),updateColor:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("update ",t),e.next=3,W.updateTag(t);case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},ct=ot,lt=Object(v["a"])(ct,st,rt,!1,null,null,null);lt.options.__file="Admin.vue";var ut=lt.exports;i["default"].use(Xe["a"]);var dt=new Xe["a"]({mode:"history",base:L["default"].baseurl,routes:[{path:"/admin",components:{modal:ut}},{path:"/register",components:{modal:Q}},{path:"/login",components:{modal:ne}},{path:"/new_event",components:{modal:he}},{path:"/settings",components:{modal:ce}},{path:"/event/:id",components:{modal:ke}},{path:"/edit/:id",components:{modal:he},props:{edit:!0}},{path:"/export/:type",components:{modal:it}}]}),pt=n("0b97"),mt=n("a638");i["default"].use(c.a,{firstDayOfWeek:2}),i["default"].use(r["a"]),i["default"].use(s["a"]),i["default"].use(x.a),i["default"].component("typeahead",g),i["default"].component("v-icon",l["a"]);var ft={en:Object(a["a"])({},C.a,mt["default"]),it:Object(a["a"])({},y.a,pt["default"])},ht=new s["a"]({locale:"it",messages:ft});i["default"].use(k.a,{i18n:function(e,t){return ht.t(e,t)}}),i["default"].config.productionTip=!1,i["default"].config.lang="it",new i["default"]({i18n:ht,router:dt,store:M,render:function(e){return e(Ye)}}).$mount("#app")},"5be1":function(e,t,n){"use strict";var a=n("7e32"),i=n.n(a);i.a},"64a9":function(e,t,n){},"6ded":function(e,t,n){"use strict";var a=n("8a1d"),i=n.n(a);i.a},"7e32":function(e,t,n){},"8a1d":function(e,t,n){},"8b71":function(e,t,n){"use strict";var a=n("e3a2"),i=n.n(a);i.a},9023:function(e,t,n){},a1bc:function(e,t,n){"use strict";(function(e){n("cadf"),n("551c"),n("097d");e.exports={env:"development",locale:"it",title:"Gancio",baseurl:"http://localhost:8080",apiurl:"http://localhost:9000/api",db:{storage:"/home/les/dev/hacklab/eventi/db.sqlite",dialect:"sqlite"},admin:"lesion@autistici.org",smtp:{host:"mail.cisti.org",secure:!0,auth:{user:"eventi@cisti.org",pass:"268CxUFkDWHN51fk"}},secret:"nonosecretsuper"}}).call(this,n("dd40")(e))},a638:function(e,t,n){"use strict";(function(e){n("cadf"),n("551c"),n("097d");var t={where_explanation:"Specify event' place",address_explanation:"Insert address",multidate_explanation:"Multiple date?",when_explanation:"Select a day",what_explanation:"Event's title",description_explanation:"Describe the event",date_explanation:"Select the day",dates_explanation:"Select the days",time_start_explanation:"Insert start time",time_end_explanation:"You could insert end time",media_explanation:"You can upload a media",tag_explanation:"Insert a tag",export_intro:"Sharing is caring.",export_feed_explanation:'Per seguire gli aggiornamenti da computer o smartphone senza la necessità di aprire periodicamente il sito, il metodo consigliato è quello dei Feed RSS.<br/>\n  Con i feed rss utilizzi un\'apposita applicazione per ricevere aggiornamenti dai siti che più ti interessano. \n  È un buon metodo per seguire anche molti siti in modo molto rapido, senza necessità di creare un account o altre complicazioni.<br/>\n\n  Se hai Android, ti consigliamo <a href="https://play.google.com/store/apps/details?id=net.frju.flym">Flym</a> o Feeder<br />\n  Per iPhone/iPad puoi usare <a href="https://itunes.apple.com/ua/app/feeds4u/id1038456442?mt=8">Feed4U</a><br />\n  Per il computer fisso/portatile consigliamo  Feedbro, da installare all\'interno <a href="https://addons.mozilla.org/en-GB/firefox/addon/feedbroreader/">di Firefox </a>o <a href="https://chrome.google.com/webstore/detail/feedbro/mefgmmbdailogpfhfblcnnjfmnpnmdfa">di Chrome</a> e compatibile con tutti i principali sistemi operativi.</p>\n<br/>\n  Aggiungendo il link sopra, rimarrai aggiornata sui seguenti eventi:',SignIn:"Sign In",registration_email:"Hi, your registration will be confirmed soon.",register_explanation:".."};e.exports=t}).call(this,n("dd40")(e))},d063:function(e,t,n){},d1d2:function(e,t,n){},d478:function(e,t,n){"use strict";var a=n("d1d2"),i=n.n(a);i.a},d7a8:function(e,t,n){"use strict";var a=n("d063"),i=n.n(a);i.a},e3a2:function(e,t,n){}});
//# sourceMappingURL=app.85eb2b80.js.map